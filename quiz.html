<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TradeLab | Trading Quiz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: #0b0f14;
      color: #eaeaea;
      min-height: 100vh;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 40px;
      background: rgba(11, 15, 20, 0.95);
      border-bottom: 1px solid #1e2a3a;
    }

    .logo {
      font-size: 22px;
      font-weight: 700;
      background: linear-gradient(90deg, #00ff9c, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-decoration: none;
    }

    .back-btn {
      padding: 10px 20px;
      background: rgba(0, 255, 156, 0.1);
      border: 1px solid #00ff9c;
      color: #00ff9c;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 500;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .page-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .page-header h1 {
      font-size: 36px;
      margin-bottom: 10px;
      background: linear-gradient(90deg, #00ff9c, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .page-header p {
      color: #888;
    }

    /* Quiz Selection */
    .quiz-selection {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .quiz-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid #1e2a3a;
      border-radius: 12px;
      padding: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quiz-card:hover {
      border-color: #00ff9c;
      transform: translateY(-5px);
    }

    .quiz-card.completed {
      border-color: #00ff9c;
    }

    .quiz-card .icon {
      font-size: 40px;
      margin-bottom: 15px;
    }

    .quiz-card h3 {
      font-size: 18px;
      margin-bottom: 8px;
    }

    .quiz-card p {
      font-size: 13px;
      color: #888;
      margin-bottom: 15px;
    }

    .quiz-card .meta {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #666;
    }

    .quiz-card .badge {
      background: rgba(0, 255, 156, 0.1);
      color: #00ff9c;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 11px;
    }

    .quiz-card .badge.completed {
      background: #00ff9c;
      color: #000;
    }

    /* Quiz Container */
    .quiz-container {
      display: none;
    }

    .quiz-container.active {
      display: block;
    }

    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #1e2a3a;
    }

    .quiz-progress {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .progress-bar {
      width: 200px;
      height: 8px;
      background: #1e2a3a;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00ff9c, #00d4ff);
      transition: width 0.3s ease;
    }

    .question-counter {
      font-size: 14px;
      color: #888;
    }

    .score-display {
      font-size: 16px;
      color: #00ff9c;
    }

    /* Question Card */
    .question-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid #1e2a3a;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 20px;
    }

    .question-text {
      font-size: 20px;
      margin-bottom: 25px;
      line-height: 1.5;
    }

    .options-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .option-btn {
      padding: 16px 20px;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 10px;
      color: #eaeaea;
      font-size: 15px;
      text-align: left;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .option-btn:hover:not(.disabled) {
      border-color: #00ff9c;
      background: rgba(0, 255, 156, 0.05);
    }

    .option-btn.selected {
      border-color: #00d4ff;
      background: rgba(0, 212, 255, 0.1);
    }

    .option-btn.correct {
      border-color: #00ff9c;
      background: rgba(0, 255, 156, 0.15);
      color: #00ff9c;
    }

    .option-btn.wrong {
      border-color: #ff4d4d;
      background: rgba(255, 77, 77, 0.15);
      color: #ff4d4d;
    }

    .option-btn.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    /* Explanation */
    .explanation {
      margin-top: 20px;
      padding: 20px;
      background: rgba(0, 212, 255, 0.05);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 10px;
      display: none;
    }

    .explanation.show {
      display: block;
    }

    .explanation h4 {
      color: #00d4ff;
      margin-bottom: 10px;
    }

    .explanation p {
      color: #888;
      font-size: 14px;
      line-height: 1.6;
    }

    /* Navigation Buttons */
    .quiz-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
    }

    .nav-btn {
      padding: 12px 30px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nav-btn.secondary {
      background: transparent;
      border: 1px solid #30363d;
      color: #888;
    }

    .nav-btn.primary {
      background: linear-gradient(90deg, #00ff9c, #00d4ff);
      border: none;
      color: #000;
    }

    .nav-btn:hover {
      transform: translateY(-2px);
    }

    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Results Screen */
    .results-screen {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .results-screen.active {
      display: block;
    }

    .results-icon {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .results-score {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .results-score.great {
      color: #00ff9c;
    }

    .results-score.good {
      color: #00d4ff;
    }

    .results-score.poor {
      color: #ff4d4d;
    }

    .results-message {
      font-size: 18px;
      color: #888;
      margin-bottom: 30px;
    }

    .results-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    /* Mobile */
    @media (max-width: 768px) {
      .navbar {
        padding: 12px 20px;
      }

      .page-header h1 {
        font-size: 28px;
      }

      .question-text {
        font-size: 18px;
      }

      .quiz-nav {
        flex-direction: column;
        gap: 10px;
      }

      .nav-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <nav class="navbar">
    <a href="index.html" class="logo">TradeLab</a>
    <a href="index.html" class="back-btn">‚Üê Back to Learning</a>
  </nav>

  <div class="container">
    <div class="page-header">
      <h1>üß† Trading Quiz</h1>
      <p>Test your knowledge and reinforce your learning</p>
    </div>

    <!-- Quiz Selection -->
    <div class="quiz-selection" id="quizSelection">
      <div class="quiz-card" onclick="startQuiz('basics')">
        <div class="icon">üìä</div>
        <h3>Trading Basics</h3>
        <p>Candlesticks, Market Structure, Trendlines</p>
        <div class="meta">
          <span>10 Questions</span>
          <span class="badge" id="badge-basics">Start</span>
        </div>
      </div>

      <div class="quiz-card" onclick="startQuiz('snr')">
        <div class="icon">üìà</div>
        <h3>Support & Resistance</h3>
        <p>S&R Zones, Role Reversal, Entry/Exit</p>
        <div class="meta">
          <span>10 Questions</span>
          <span class="badge" id="badge-snr">Start</span>
        </div>
      </div>

      <div class="quiz-card" onclick="startQuiz('risk')">
        <div class="icon">üõ°Ô∏è</div>
        <h3>Risk Management</h3>
        <p>Position Sizing, Stop Loss, R:R Ratio</p>
        <div class="meta">
          <span>10 Questions</span>
          <span class="badge" id="badge-risk">Start</span>
        </div>
      </div>

      <div class="quiz-card" onclick="startQuiz('smc')">
        <div class="icon">üß†</div>
        <h3>Smart Money Concepts</h3>
        <p>Liquidity, BOS, CHoCH, Order Blocks</p>
        <div class="meta">
          <span>10 Questions</span>
          <span class="badge" id="badge-smc">Start</span>
        </div>
      </div>
    </div>

    <!-- Quiz Container -->
    <div class="quiz-container" id="quizContainer">
      <div class="quiz-header">
        <div class="quiz-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <span class="question-counter" id="questionCounter">1/10</span>
        </div>
        <span class="score-display">Score: <span id="currentScore">0</span></span>
      </div>

      <div class="question-card">
        <div class="question-text" id="questionText"></div>
        <div class="options-list" id="optionsList"></div>
        <div class="explanation" id="explanation">
          <h4>üí° Explanation</h4>
          <p id="explanationText"></p>
        </div>
      </div>

      <div class="quiz-nav">
        <button class="nav-btn secondary" onclick="backToSelection()">‚Üê Back to Quizzes</button>
        <button class="nav-btn primary" id="nextBtn" onclick="nextQuestion()" disabled>Next Question ‚Üí</button>
      </div>
    </div>

    <!-- Results Screen -->
    <div class="results-screen" id="resultsScreen">
      <div class="results-icon" id="resultsIcon">üéâ</div>
      <div class="results-score" id="resultsScore">0/10</div>
      <div class="results-message" id="resultsMessage">Great job!</div>
      <div class="results-actions">
        <button class="nav-btn secondary" onclick="backToSelection()">Try Another Quiz</button>
        <button class="nav-btn primary" onclick="retryQuiz()">Retry This Quiz</button>
      </div>
    </div>
  </div>

  <script>
    // Quiz Data
    const quizData = {
      basics: [
        {
          q: "What does a green/bullish candlestick indicate?",
          options: ["Price went down", "Price went up", "No price change", "Market is closed"],
          correct: 1,
          explanation: "A green/bullish candlestick means the closing price was higher than the opening price, indicating buyers were in control."
        },
        {
          q: "What is a 'Higher High' in market structure?",
          options: ["A new low below previous low", "A new high above previous high", "Price moving sideways", "A reversal pattern"],
          correct: 1,
          explanation: "A Higher High (HH) occurs when price makes a new high that is above the previous high, indicating an uptrend."
        },
        {
          q: "What is the correct way to draw a trendline?",
          options: ["Connect random points", "Connect at least 2 swing lows/highs", "Draw horizontally only", "Use only 1 point"],
          correct: 1,
          explanation: "A valid trendline requires at least 2 swing points (lows for uptrend, highs for downtrend). More touches = stronger trendline."
        },
        {
          q: "What does a Doji candlestick indicate?",
          options: ["Strong bullish momentum", "Strong bearish momentum", "Indecision in the market", "Trend continuation"],
          correct: 2,
          explanation: "A Doji has nearly equal open and close prices, indicating indecision between buyers and sellers."
        },
        {
          q: "What is BOS (Break of Structure)?",
          options: ["A candlestick pattern", "When price breaks a key swing high/low", "A type of indicator", "A trading strategy"],
          correct: 1,
          explanation: "BOS occurs when price breaks a significant swing high (in uptrend) or swing low (in downtrend), confirming trend continuation."
        },
        {
          q: "What does a long upper wick indicate?",
          options: ["Buyers are strong", "Sellers rejected higher prices", "Market is bullish", "Volume is high"],
          correct: 1,
          explanation: "A long upper wick shows that price went up but sellers pushed it back down, indicating selling pressure at higher levels."
        },
        {
          q: "What is CHoCH (Change of Character)?",
          options: ["A bullish pattern", "A bearish pattern", "A potential trend reversal signal", "A volume indicator"],
          correct: 2,
          explanation: "CHoCH occurs when price breaks structure in the opposite direction, signaling a potential trend change."
        },
        {
          q: "In an uptrend, where should you look for entries?",
          options: ["At the highs", "At the lows/pullbacks", "Anywhere", "Only at support"],
          correct: 1,
          explanation: "In an uptrend, the best entries are at pullbacks to support or demand zones, giving better risk-reward."
        },
        {
          q: "What creates a swing high?",
          options: ["Lower highs on both sides", "Higher lows on both sides", "Lower highs before and after", "A candle with highest high surrounded by lower highs"],
          correct: 3,
          explanation: "A swing high is a candle with the highest high that has lower highs on both sides, creating a peak."
        },
        {
          q: "What timeframe should beginners focus on?",
          options: ["1 minute", "Higher timeframes (4H, Daily)", "5 seconds", "All timeframes equally"],
          correct: 1,
          explanation: "Beginners should focus on higher timeframes (4H, Daily) as they have less noise and clearer structure."
        }
      ],
      snr: [
        {
          q: "What is Support in trading?",
          options: ["A price level where selling pressure increases", "A price level where buying pressure increases", "A type of indicator", "The highest price"],
          correct: 1,
          explanation: "Support is a price level where buying interest is strong enough to overcome selling pressure, preventing further decline."
        },
        {
          q: "What is Role Reversal in S&R?",
          options: ["Support becomes resistance after breaking down", "Resistance always stays resistance", "Support never changes", "Buying at resistance"],
          correct: 0,
          explanation: "Role Reversal occurs when broken support becomes resistance, or broken resistance becomes support."
        },
        {
          q: "Where should you place your stop loss when buying at support?",
          options: ["Exactly at support", "Above resistance", "Below the support zone", "No stop loss needed"],
          correct: 2,
          explanation: "Stop loss should be placed below the support zone to give the trade room to breathe while limiting risk."
        },
        {
          q: "What makes a support/resistance level stronger?",
          options: ["Fewer touches", "More touches and reactions", "Only one touch", "Random price levels"],
          correct: 1,
          explanation: "The more times price reacts to a level, the stronger it becomes. Multiple touches = more significance."
        },
        {
          q: "What is a fake breakout?",
          options: ["A real breakout", "Price breaks level but quickly reverses", "Price staying at support", "A candlestick pattern"],
          correct: 1,
          explanation: "A fake breakout occurs when price briefly breaks a level but quickly reverses, trapping traders who entered on the breakout."
        },
        {
          q: "How should you mark S&R zones?",
          options: ["As exact lines", "As zones/areas", "Only on 1 min chart", "Using indicators only"],
          correct: 1,
          explanation: "S&R should be marked as zones rather than exact lines because price rarely reacts to exact levels."
        },
        {
          q: "What happens when support is broken with strong volume?",
          options: ["It becomes stronger support", "It likely becomes resistance", "Nothing changes", "Volume doesn't matter"],
          correct: 1,
          explanation: "When support breaks with strong volume, it often flips to become resistance (Role Reversal)."
        },
        {
          q: "What is a retest in S&R trading?",
          options: ["First touch of a level", "Price returning to test broken level", "A new support level", "Drawing new lines"],
          correct: 1,
          explanation: "A retest occurs when price returns to a broken level to test it from the other side, confirming the break."
        },
        {
          q: "Which S&R levels are more reliable?",
          options: ["Lower timeframe levels", "Higher timeframe levels", "Both are equal", "Only daily levels"],
          correct: 1,
          explanation: "Higher timeframe S&R levels are more reliable because more traders see and react to them."
        },
        {
          q: "What is confluence in S&R?",
          options: ["One reason to trade", "Multiple factors aligning at same level", "Random trading", "High volume only"],
          correct: 1,
          explanation: "Confluence occurs when multiple factors (S&R, trendline, fib level) align at the same price, increasing probability."
        }
      ],
      risk: [
        {
          q: "What is the recommended maximum risk per trade?",
          options: ["10-20%", "5-10%", "1-2%", "50%"],
          correct: 2,
          explanation: "Professional traders risk 1-2% per trade maximum. This allows surviving losing streaks while preserving capital."
        },
        {
          q: "What is Risk-Reward Ratio (R:R)?",
          options: ["How much you win vs lose overall", "Potential profit vs potential loss on a trade", "Your account balance", "Win rate percentage"],
          correct: 1,
          explanation: "R:R compares your potential reward (take profit distance) to your potential risk (stop loss distance)."
        },
        {
          q: "What is a good minimum R:R ratio?",
          options: ["1:0.5", "1:1", "1:2 or better", "1:0.1"],
          correct: 2,
          explanation: "Minimum 1:2 R:R means you can be wrong 50% of the time and still be profitable."
        },
        {
          q: "What is position sizing?",
          options: ["How big your monitor is", "Calculating how many units to buy based on risk", "Random lot size", "Maximum leverage"],
          correct: 1,
          explanation: "Position sizing calculates how many units to trade so that if stop loss hits, you only lose your predetermined risk amount."
        },
        {
          q: "Why should you never move your stop loss further away?",
          options: ["It's fine to move it", "It increases risk beyond planned", "Stop losses don't matter", "To get better fills"],
          correct: 1,
          explanation: "Moving stop loss further increases your risk beyond what you planned, breaking your risk management rules."
        },
        {
          q: "What is drawdown?",
          options: ["Your total profit", "Peak to trough decline in account", "Daily profit", "Lot size"],
          correct: 1,
          explanation: "Drawdown measures the decline from your account peak to its lowest point before a new peak."
        },
        {
          q: "If you have $10,000 and risk 2%, what is your risk amount?",
          options: ["$100", "$200", "$500", "$1000"],
          correct: 1,
          explanation: "$10,000 √ó 2% = $200. This is the maximum you should lose if your stop loss is hit."
        },
        {
          q: "What is the purpose of a stop loss?",
          options: ["To guarantee profit", "To limit potential loss", "To increase leverage", "To avoid trading"],
          correct: 1,
          explanation: "A stop loss automatically exits your trade at a predetermined price to limit your potential loss."
        },
        {
          q: "What is scaling in?",
          options: ["Adding to losing trades", "Adding to winning trades after confirmation", "Exiting all at once", "Using maximum leverage"],
          correct: 1,
          explanation: "Scaling in means adding to a winning position after price confirms your direction. Never scale into losers."
        },
        {
          q: "What is the breakeven point?",
          options: ["Maximum loss point", "When profit equals your initial risk", "Entry price after moving SL", "The highest profit"],
          correct: 2,
          explanation: "Breakeven is when you move your stop loss to entry price, ensuring you don't lose money even if trade reverses."
        }
      ],
      smc: [
        {
          q: "What is liquidity in SMC?",
          options: ["Water in the market", "Clusters of stop losses that big players target", "Trading volume only", "Market depth"],
          correct: 1,
          explanation: "In SMC, liquidity refers to clusters of stop losses (above highs, below lows) that institutions target to fill large orders."
        },
        {
          q: "What is an Order Block?",
          options: ["A random candle", "The last bullish/bearish candle before a strong move", "A support level", "A trendline"],
          correct: 1,
          explanation: "An Order Block is typically the last opposing candle before a strong impulsive move, showing where institutions placed orders."
        },
        {
          q: "What is a Fair Value Gap (FVG)?",
          options: ["A type of indicator", "An imbalance/gap in price action", "A support zone", "A candlestick pattern"],
          correct: 1,
          explanation: "FVG is a gap between candles showing imbalance. Price often returns to fill these gaps before continuing."
        },
        {
          q: "What is inducement in SMC?",
          options: ["A breakout", "A trap to lure retail traders before reversal", "A strong support", "High volume"],
          correct: 1,
          explanation: "Inducement is a setup that tricks retail traders into entering, then reverses to stop them out and provide liquidity."
        },
        {
          q: "Where is Buy-Side Liquidity located?",
          options: ["Below swing lows", "Above swing highs", "At support", "In the middle of range"],
          correct: 1,
          explanation: "Buy-side liquidity sits above swing highs where stop losses of short sellers and buy stop orders are clustered."
        },
        {
          q: "Where is Sell-Side Liquidity located?",
          options: ["Above swing highs", "Below swing lows", "At resistance", "At order blocks"],
          correct: 1,
          explanation: "Sell-side liquidity sits below swing lows where stop losses of long traders are clustered."
        },
        {
          q: "What is a liquidity sweep?",
          options: ["Price staying at support", "Price quickly taking out liquidity then reversing", "A breakout trade", "A trend continuation"],
          correct: 1,
          explanation: "A liquidity sweep occurs when price spikes to take out stop losses then quickly reverses, trapping traders."
        },
        {
          q: "What is smart money?",
          options: ["Retail traders", "Institutional traders/banks with large capital", "High frequency traders only", "News traders"],
          correct: 1,
          explanation: "Smart money refers to institutional traders, banks, and hedge funds who move markets with large orders."
        },
        {
          q: "What should you look for before entering at an Order Block?",
          options: ["Just enter blindly", "Confirmation like CHoCH or BOS", "High volume only", "News events"],
          correct: 1,
          explanation: "Always wait for confirmation (CHoCH, BOS, or engulfing pattern) at order blocks before entering."
        },
        {
          q: "Why do institutions need liquidity?",
          options: ["They don't need it", "To fill large orders without moving price too much", "To lose money", "For fun"],
          correct: 1,
          explanation: "Institutions need liquidity (opposing orders) to fill their large positions without causing excessive slippage."
        }
      ]
    };

    let currentQuiz = null;
    let currentQuestion = 0;
    let score = 0;
    let answered = false;

    function startQuiz(quizId) {
      currentQuiz = quizId;
      currentQuestion = 0;
      score = 0;
      answered = false;

      document.getElementById('quizSelection').style.display = 'none';
      document.getElementById('quizContainer').classList.add('active');
      document.getElementById('resultsScreen').classList.remove('active');
      document.getElementById('currentScore').textContent = '0';

      loadQuestion();
    }

    function loadQuestion() {
      const quiz = quizData[currentQuiz];
      const q = quiz[currentQuestion];

      document.getElementById('questionText').textContent = q.q;
      document.getElementById('questionCounter').textContent = (currentQuestion + 1) + '/' + quiz.length;
      document.getElementById('progressFill').style.width = ((currentQuestion + 1) / quiz.length * 100) + '%';

      const optionsList = document.getElementById('optionsList');
      optionsList.innerHTML = '';

      q.options.forEach((opt, index) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = opt;
        btn.onclick = () => selectAnswer(index);
        optionsList.appendChild(btn);
      });

      document.getElementById('explanation').classList.remove('show');
      document.getElementById('nextBtn').disabled = true;
      answered = false;
    }

    function selectAnswer(index) {
      if (answered) return;
      answered = true;

      const quiz = quizData[currentQuiz];
      const q = quiz[currentQuestion];
      const options = document.querySelectorAll('.option-btn');

      options.forEach((opt, i) => {
        opt.classList.add('disabled');
        if (i === q.correct) {
          opt.classList.add('correct');
        } else if (i === index) {
          opt.classList.add('wrong');
        }
      });

      if (index === q.correct) {
        score++;
        document.getElementById('currentScore').textContent = score;
      }

      document.getElementById('explanationText').textContent = q.explanation;
      document.getElementById('explanation').classList.add('show');
      
      const nextBtn = document.getElementById('nextBtn');
      nextBtn.disabled = false;
      if (currentQuestion === quiz.length - 1) {
        nextBtn.textContent = 'See Results ‚Üí';
      } else {
        nextBtn.textContent = 'Next Question ‚Üí';
      }
    }

    function nextQuestion() {
      const quiz = quizData[currentQuiz];
      
      if (currentQuestion < quiz.length - 1) {
        currentQuestion++;
        loadQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      document.getElementById('quizContainer').classList.remove('active');
      document.getElementById('resultsScreen').classList.add('active');

      const quiz = quizData[currentQuiz];
      const percentage = (score / quiz.length) * 100;

      document.getElementById('resultsScore').textContent = score + '/' + quiz.length;
      
      const scoreEl = document.getElementById('resultsScore');
      const iconEl = document.getElementById('resultsIcon');
      const msgEl = document.getElementById('resultsMessage');

      if (percentage >= 80) {
        scoreEl.className = 'results-score great';
        iconEl.textContent = 'üéâ';
        msgEl.textContent = 'Excellent! You really know your stuff!';
      } else if (percentage >= 60) {
        scoreEl.className = 'results-score good';
        iconEl.textContent = 'üëç';
        msgEl.textContent = 'Good job! Keep learning to improve!';
      } else {
        scoreEl.className = 'results-score poor';
        iconEl.textContent = 'üìö';
        msgEl.textContent = 'Review the material and try again!';
      }

      // Save completion
      const completed = JSON.parse(localStorage.getItem('quizCompleted')) || {};
      completed[currentQuiz] = Math.max(completed[currentQuiz] || 0, score);
      localStorage.setItem('quizCompleted', JSON.stringify(completed));
      updateBadges();
    }

    function backToSelection() {
      document.getElementById('quizSelection').style.display = 'grid';
      document.getElementById('quizContainer').classList.remove('active');
      document.getElementById('resultsScreen').classList.remove('active');
      document.getElementById('nextBtn').textContent = 'Next Question ‚Üí';
    }

    function retryQuiz() {
      startQuiz(currentQuiz);
    }

    function updateBadges() {
      const completed = JSON.parse(localStorage.getItem('quizCompleted')) || {};
      
      Object.keys(completed).forEach(quiz => {
        const badge = document.getElementById('badge-' + quiz);
        if (badge) {
          badge.textContent = completed[quiz] + '/10 ‚úì';
          badge.classList.add('completed');
        }
      });
    }

    // Load badges on page load
    updateBadges();
  </script>

</body>
</html>
